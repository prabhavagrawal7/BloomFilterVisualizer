import{r as e,a as t,R as r}from"./react-vendor-CqEpiFl-.js";import{B as s,H as n}from"./bloom-filter-CDaziQ6G.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var i={exports:{}},a={},o=e,l=Symbol.for("react.element"),d=Symbol.for("react.fragment"),c=Object.prototype.hasOwnProperty,u=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,m={key:!0,ref:!0,__self:!0,__source:!0};function h(e,t,r){var s,n={},i=null,a=null;for(s in void 0!==r&&(i=""+r),void 0!==t.key&&(i=""+t.key),void 0!==t.ref&&(a=t.ref),t)c.call(t,s)&&!m.hasOwnProperty(s)&&(n[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===n[s]&&(n[s]=t[s]);return{$$typeof:l,type:e,key:i,ref:a,props:n,_owner:u.current}}a.Fragment=d,a.jsx=h,a.jsxs=h,i.exports=a;var f=i.exports,x={},p=t;x.createRoot=p.createRoot,x.hydrateRoot=p.hydrateRoot;var b=(e=>(e.ADD="add",e.CHECK="check",e.NONE="none",e))(b||{});const g=e.createContext(void 0),y=()=>{const t=e.useContext(g);if(!t)throw new Error("useAnimation must be used within an AnimationProvider");return t},v=({children:t})=>{const[r,s]=e.useState(!1),[n,i]=e.useState("none"),[a,o]=e.useState(1),l={isAnimating:r,setIsAnimating:s,focusTarget:n,setFocusTarget:i,animationSpeed:a,setAnimationSpeed:o,replayLastAnimation:()=>{}};return f.jsx(g.Provider,{value:l,children:t})},w=e.createContext(void 0),j=()=>{const t=e.useContext(w);if(!t)throw new Error("useBloomFilter must be used within a BloomFilterProvider");return t},N=({children:t,initialSize:r=32,initialHashFunctions:i=3})=>{const{setIsAnimating:a,setFocusTarget:o}=y(),l=e.useRef(new s(r,i)),d=e.useRef(new n),[c,u]=e.useState(null),[m,h]=e.useState(l.current.getState()),x=()=>{h(l.current.getState())},p={bloomFilter:l.current,historyManager:d.current,currentAnimation:c,setCurrentAnimation:u,filterState:m,updateFilterState:x,resetFilter:()=>{l.current.reset(),x(),d.current.addEntry("reset",{filterState:l.current.getState()},"Reset Bloom Filter")},updateFilterParams:(e,t)=>{const r=Math.max(8,Math.min(128,e)),s=Math.max(1,Math.min(5,t));l.current.updateParams(r,s),x(),d.current.addEntry("update",{filterState:l.current.getState(),oldSize:e!==r?e:null,oldHashFunctions:t!==s?t:null},`Updated filter parameters to size=${r}, hash functions=${s}`)},addWord:e=>{if(l.current.add(e)){x();const t=l.current.getHashPositions(e),r=d.current.addEntry("add",{word:e,positions:t,filterState:l.current.getState()},`Added word "${e}" to the filter`);return u(r),a(!0),o(b.ADD),!0}return!1},checkWord:e=>{const t=l.current.mightContain(e),r=l.current.definitelyContains(e),s=l.current.getHashPositions(e),n=d.current.addEntry("check",{word:e,positions:s,mightContain:t,definitelyContains:r,filterState:l.current.getState()},`Checked if word "${e}" exists in the filter`);return u(n),a(!0),o(b.CHECK),{mightContain:t,definitelyContains:r}},removeWord:e=>!!l.current.remove(e)&&(x(),d.current.addEntry("remove",{word:e,filterState:l.current.getState()},`Removed word "${e}" from the filter`),!0),clearAnimations:()=>{},replayLastAnimation:()=>{const e=d.current.getHistory();if(e.length>0){const t=e[0];u(t),a(!0),"add"===t.type?o(b.ADD):"check"===t.type?o(b.CHECK):o(b.NONE)}}};return f.jsx(w.Provider,{value:p,children:t})},C=()=>{const{updateFilterParams:t,resetFilter:r,filterState:s,replayLastAnimation:n}=j(),[i,a]=e.useState(s.size),[o,l]=e.useState(s.numHashFunctions),d=()=>{t(i,o)};return f.jsxs("div",{className:"mb-8 bg-slate-50 p-5 rounded-lg",children:[f.jsxs("div",{className:"flex flex-wrap gap-5 items-center mb-5",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("label",{htmlFor:"filterSize",className:"font-semibold",children:"Filter Size:"}),f.jsx("input",{type:"number",id:"filterSize",min:"8",max:"128",step:"8",className:"border border-slate-300 rounded p-2 w-20",value:i,onChange:e=>{const t=parseInt(e.target.value);a(t)},onBlur:d})]}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("label",{htmlFor:"hashFunctions",className:"font-semibold",children:"Hash Functions:"}),f.jsx("input",{type:"number",id:"hashFunctions",min:"1",max:"5",className:"border border-slate-300 rounded p-2 w-20",value:o,onChange:e=>{const t=parseInt(e.target.value);l(t)},onBlur:d})]}),f.jsx("button",{className:"px-5 py-2.5 border-none rounded-md cursor-pointer font-semibold transition-all duration-300 bg-blue-500 text-white hover:bg-blue-600",onClick:r,children:"Reset Filter"})]}),f.jsx("div",{className:"mt-5",children:f.jsx("button",{className:"px-5 py-2.5 border-none rounded-md cursor-pointer font-semibold transition-all duration-300 bg-blue-500 text-white hover:bg-blue-600",onClick:n,children:"Replay Last Animation"})})]})},S=e.forwardRef((({bitArray:t,highlightPositions:r=[]},s)=>{const n=e.useRef(null),i=e.useRef([]);return e.useImperativeHandle(s,(()=>({getBitElements:()=>i.current,highlightBit:e=>{i.current[e]&&i.current[e].classList.add("highlight")},unhighlightBit:e=>{i.current[e]&&i.current[e].classList.remove("highlight")},unhighlightAll:()=>{i.current.forEach((e=>e.classList.remove("highlight")))}}))),e.useEffect((()=>{n.current&&(i.current=Array.from(n.current.querySelectorAll(".bit")))}),[t]),e.useEffect((()=>{i.current.forEach((e=>e.classList.remove("highlight"))),r.forEach((e=>{i.current[e]&&i.current[e].classList.add("highlight")}))}),[r]),f.jsx("div",{className:"flex flex-wrap gap-1 mb-5 justify-center sticky top-[50px] bg-white z-10 py-3",ref:n,children:t.map(((e,t)=>f.jsxs("div",{className:"bit w-8 h-8 flex items-center justify-center border border-gray-300 rounded-md text-lg font-mono relative cursor-pointer transition-colors "+(e?"bg-blue-500 text-white":"bg-white text-gray-800"),"data-index":t,children:[e?"1":"0",t%4==0&&f.jsx("span",{className:"absolute -top-5 text-xs text-gray-500",children:t})]},t)))})}));const A=({startX:t,startY:r,angle:s,distance:n,duration:i,color:a="#4285f4",thickness:o=2})=>{const[l,d]=e.useState(0);return e.useEffect((()=>{const e=setTimeout((()=>{requestAnimationFrame((()=>{d(n)}))}),50);return()=>{clearTimeout(e)}}),[n]),f.jsx("div",{className:"absolute pointer-events-none z-10",style:{top:`${r}px`,left:`${t}px`,width:`${l}px`,height:`${o}px`,backgroundColor:a,transform:`rotate(${s}deg)`,transformOrigin:"left center",transition:`width ${i}ms ease-out`}})},E=e.memo((({bloomArrayRef:t})=>{const r=e.useRef(null),{currentAnimation:s}=j(),{isAnimating:n}=y(),{lines:i,labels:a,animateAddWord:o,clearAnimations:l}=function(){const{animationSpeed:t,setIsAnimating:r}=y(),[s,n]=e.useState([]),[i,a]=e.useState([]),[o,l]=e.useState([]),d=e.useRef(null),c=e.useCallback((()=>{d.current&&(window.clearTimeout(d.current),d.current=null),n([]),a([]),l([])}),[]),u=e.useRef(!1),m=e.useCallback(((e,s,i,o)=>{if(u.current)return;u.current=!0,c();const m=800/t,h=500/t;r(!0);const f=[];s.forEach((e=>{const t=i[e];if(t){const e=t.getBoundingClientRect(),r=o.getBoundingClientRect();f.push({x:e.left+e.width/2-r.left,y:e.top+e.height/2-r.top})}}));const x=[],p=o.offsetWidth/2;x.push({id:"label-word",text:e,top:-15,left:`${p}px`}),a(x);let b=0;const g=()=>{if(b>=f.length)return;const t=f[b],r=t.x-p,s=t.y-20,i=Math.atan2(s,r)*(180/Math.PI),o=Math.sqrt(r*r+s*s),l={id:`line-${b}`,startX:p,startY:20,angle:i,distance:o},d={id:`label-hash-${b}`,text:`h${b+1}(${e})`,top:30,left:`${p}px`};n((e=>[...e,l])),a((e=>{const t=e.find((e=>"label-word"===e.id));return t?[t,d]:[d]})),setTimeout((()=>{a((e=>e.filter((e=>e.id!==d.id)))),b++,g()}),600)};setTimeout(g,200),setTimeout((()=>{s.forEach(((e,t)=>{setTimeout((()=>{l((t=>[...t,e]))}),m+t*h)})),d.current=window.setTimeout((()=>{requestAnimationFrame((()=>{n([]),a([]),l([]),d.current=null,u.current=!1,r(!1)}))}),m+s.length*h+600)}),200)}),[t,c,r]);return e.useEffect((()=>()=>{d.current&&window.clearTimeout(d.current)}),[]),{lines:s,labels:i,highlightedBits:o,animateAddWord:m,clearAnimations:c}}();return e.useEffect((()=>{if(n&&s&&(null==t?void 0:t.current)&&r.current&&(l(),"add"===s.type||"check"===s.type)){const{word:e,positions:n}=s.data,i=Array.from(t.current.querySelectorAll(".bit"));o(e,n,i,r.current)}}),[n,s,t]),e.useEffect((()=>()=>{l()}),[]),f.jsxs("div",{className:"h-32 mb-5 relative bg-slate-50 rounded-lg overflow-visible",ref:r,children:[i.map((e=>f.jsx(A,{startX:e.startX,startY:e.startY,angle:e.angle,distance:e.distance,duration:600,color:"#4285f4",thickness:2},e.id))),a.map((e=>f.jsx("div",{className:"absolute bg-white px-2 py-1 rounded shadow-sm text-sm z-10 min-w-20 text-center mt-1 whitespace-nowrap overflow-hidden text-ellipsis",style:{top:`${e.top}px`,left:e.left,transform:"translateX(-50%)"},children:e.text},e.id)))]})})),F=e.memo((()=>{const{addWord:t,removeWord:r,filterState:s,bloomFilter:n}=j(),{isAnimating:i,focusTarget:a,setFocusTarget:o}=y(),[l,d]=e.useState(""),[c,u]=e.useState(""),[m,h]=e.useState(null),[x,p]=e.useState(!1),g=e.useCallback((()=>{const e=l.trim();if(!e)return void u("Please enter a word");if(s.words.includes(e))return void u(`Word "${e}" is already in the filter.`);const r=n.getHashPositions(e);h({word:e,positions:r,isAnimating:!0});t(e)?(d(""),u("")):(u(`Word "${e}" is already in the filter.`),h(null))}),[l,s.words,n,t]);e.useEffect((()=>{const e=null==m?void 0:m.isAnimating;!i&&e&&(h(null),a===b.ADD&&(o(b.NONE),setTimeout((()=>{p(!0)}),0)))}),[i,m,a,o]);const v=e.useCallback((e=>{"Enter"!==e.key||i||(e.preventDefault(),g())}),[i,g]),w=e.useCallback((e=>d(e.target.value)),[]),N=e.useCallback((()=>{i||(o(b.ADD),x&&p(!1))}),[i,o,x,p]);return f.jsxs("div",{className:"flex-1 bg-slate-50 p-5 rounded-lg",children:[f.jsx("h2",{className:"text-xl font-semibold mb-4 text-slate-700",children:"Add Words to Filter"}),f.jsxs("div",{className:"flex gap-3 mb-5",children:[f.jsx("input",{type:"text",value:l,onChange:w,onKeyDown:v,placeholder:"Enter a word to add...",disabled:i,autoFocus:x,onFocus:N,className:"flex-1 p-2.5 border border-slate-300 rounded-md text-base"}),f.jsx("button",{onClick:g,className:"px-5 py-2.5 border-none rounded-md cursor-pointer font-semibold transition-all duration-300 bg-blue-500 text-white hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed",disabled:i,children:"Add Word"})]}),c&&f.jsx("div",{className:"p-3 mb-4 bg-red-100 border border-red-300 text-red-700 rounded-md",children:c}),f.jsxs("div",{className:"mt-6",children:[f.jsx("h3",{className:"text-lg font-medium mb-3 text-slate-700",children:"Words in Filter"}),f.jsx("div",{className:"flex flex-wrap gap-2",children:0===s.words.length?f.jsx("div",{className:"text-slate-500 italic w-full text-center py-4",children:"No words added yet"}):s.words.map((e=>f.jsxs("div",{className:"inline-flex items-center bg-white border border-slate-200 rounded-md px-3 py-1 gap-2 shadow-sm",children:[f.jsx("span",{children:e}),f.jsx("span",{className:"ml-1 text-slate-500 hover:text-red-500 cursor-pointer font-bold text-xl",onClick:()=>r(e),children:"×"})]},e)))})]})]})})),k=e.memo((()=>{const{checkWord:t}=j(),{isAnimating:r,focusTarget:s,setFocusTarget:n}=y(),[i,a]=e.useState(""),[o,l]=e.useState(null),d=e.useRef(null),[c,u]=e.useState(!1),m=e.useRef(r);e.useEffect((()=>{m.current&&!r&&s===b.CHECK&&(n(b.NONE),setTimeout((()=>{u(!0)}),0)),m.current=r}),[r,s,n]);const h=e.useCallback((()=>{const e=i.trim();if(!e)return;if(r)return;const{mightContain:s,definitelyContains:n}=t(e);l({word:e,mightContain:s,definitelyContains:n})}),[i,r,t,l]),x=e.useCallback((e=>{"Enter"!==e.key||r||(e.preventDefault(),h())}),[r,h]),p=e.useCallback((e=>a(e.target.value)),[]),g=e.useCallback((()=>{r||(n(b.CHECK),c&&u(!1))}),[r,n,c,u]);return f.jsxs("div",{className:"flex-1 bg-slate-50 p-5 rounded-lg",children:[f.jsx("h2",{className:"text-xl font-semibold mb-4 text-slate-700",children:"Check Word"}),f.jsxs("div",{className:"flex gap-3 mb-5",children:[f.jsx("input",{type:"text",value:i,onChange:p,onKeyDown:x,placeholder:"Enter a word to check...",disabled:r,autoFocus:c,onFocus:g,className:"flex-1 p-2.5 border border-slate-300 rounded-md text-base"}),f.jsx("button",{onClick:h,className:"px-5 py-2.5 border-none rounded-md cursor-pointer font-semibold transition-all duration-300 bg-green-500 text-white hover:bg-green-600 disabled:opacity-50 disabled:cursor-not-allowed",disabled:r,children:"Check Word"})]}),f.jsx("div",{className:"relative mb-5",ref:d,children:f.jsx(E,{bloomArrayRef:d})}),f.jsx("div",{className:"mt-4",children:o&&f.jsx("div",{className:"p-4 rounded-md border "+(o?o.definitelyContains?"bg-green-100 border-green-500 text-green-800":o.mightContain?"bg-yellow-100 border-yellow-500 text-yellow-800":"bg-red-100 border-red-500 text-red-800":""),children:o?o.definitelyContains?`"${o.word}" is DEFINITELY in the Bloom filter.`:o.mightContain?`"${o.word}" MIGHT be in the Bloom filter (possible false positive).`:`"${o.word}" is DEFINITELY NOT in the Bloom filter.`:""})})]})}));function R(){var t;const{filterState:r}=j(),s=e.useRef(null);return f.jsxs("div",{className:"max-w-5xl mx-auto bg-white rounded-xl shadow-lg p-8 text-gray-800",children:[f.jsx("h1",{className:"text-4xl font-bold text-center mb-8 text-slate-700",children:"Bloom Filter Visualizer"}),f.jsx(C,{}),f.jsxs("div",{className:"mt-6",children:[f.jsxs("div",{className:"mb-8",children:[f.jsx("h2",{className:"text-2xl font-semibold mb-4 text-slate-700 sticky top-0 bg-white z-10 py-2",children:"Bloom Filter Array"}),f.jsx(S,{bitArray:r.bitArray,ref:s}),f.jsx(E,{bloomArrayRef:s.current?{current:null==(t=s.current.getBitElements()[0])?void 0:t.parentElement}:void 0})]}),f.jsxs("div",{className:"flex flex-col md:flex-row gap-6 mb-10",children:[f.jsx(F,{}),f.jsx(k,{})]}),f.jsxs("div",{className:"bg-slate-50 p-6 rounded-lg mt-8",children:[f.jsx("h2",{className:"text-2xl font-semibold mb-4 text-slate-700",children:"About Bloom Filters"}),f.jsx("p",{className:"mb-4 text-slate-600 leading-relaxed",children:"A Bloom filter is a space-efficient probabilistic data structure used to test whether an element is a member of a set. False positive matches are possible, but false negatives are not – when a Bloom filter reports that an element is not in the set, it definitely is not."}),f.jsxs("p",{className:"text-slate-600 leading-relaxed",children:[f.jsx("span",{className:"font-semibold",children:"How it works:"})," The filter uses multiple hash functions to map each element to several positions in a bit array. When checking if an element exists, if any of the mapped bits are 0, the element is definitely not in the set. If all are 1, the element might be in the set."]})]})]})]})}function T(){return f.jsx(v,{children:f.jsx(N,{initialSize:32,initialHashFunctions:3,children:f.jsx(R,{})})})}x.createRoot(document.getElementById("root")).render(f.jsx(r.StrictMode,{children:f.jsx(T,{})}));
